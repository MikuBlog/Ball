var ballRun=(function(){return function(obj){var Canvas;var canvas;var ctx;var spotArray=[];var time;if(obj){var config={Element:obj.Element||"body",Number:obj.Number||30,Radius:obj.Radius||8,spotSpeedX:obj.spotSpeedX||0.3,spotSpeedY:obj.spotSpeedY||0.3,globalCompositeOperation:obj.globalCompositeOperation||"xor",globalAlpha:obj.globalAlpha||0.3,spotColor:obj.spotColor||["rgb(20, 243, 243)","rgb(56, 255, 255)","rgb(199, 255, 255)"]}}else{var config={Element:"body",Number:30,Radius:8,spotSpeedX:0.3,spotSpeedY:0.3,globalCompositeOperation:"xor",globalAlpha:0.3,spotColor:["rgb(20, 243, 243)","rgb(56, 255, 255)","rgb(199, 255, 255)"]}}var cxo=document.querySelector(config.Element);if(cxo){var width=parseInt(window.getComputedStyle(cxo).width);var height=parseInt(window.getComputedStyle(cxo).height);cxo.style.opacity=0.95}else{throw Error("你还未指定元素，请手动配置~")}function createCas(){Canvas=document.createElement("canvas");Canvas.id="canvas";Canvas.width=width;Canvas.height=height;Canvas.style.position="absolute";Canvas.style.top=0;Canvas.style.left=0;Canvas.style.zIndex=-1;cxo.appendChild(Canvas);canvas=document.querySelector("#canvas");ctx=canvas.getContext("2d")}function getSpot(){for(var i=0;i<config.Number;i++){var spot={x:Math.random()*(canvas.width-2*config.Radius)+config.Radius,y:Math.random()*(canvas.height-2*config.Radius)+config.Radius,size:config.Radius,color:config.spotColor[~~(Math.random()*config.spotColor.length)],speedX:Math.random()*config.spotSpeedX*Math.pow(-1,~~(Math.random()*10000)),speedY:Math.random()*config.spotSpeedY*Math.pow(-1,~~(Math.random()*10000))};spotArray.push(spot)}}function renderSpot(){spotArray.forEach(function(value,index){ctx.globalCompositeOperation=config.globalCompositeOperation;ctx.globalAlpha=config.globalAlpha;ctx.beginPath();ctx.arc(value.x,value.y,value.size,0,2*Math.PI,false);ctx.fillStyle=value.color;ctx.fill()})}function run(){time=setInterval(function(){spotArray.forEach(function(value,index){if(value.x+value.size+value.speedX<canvas.width&&value.y+value.size+value.speedY<canvas.height){if(value.x-value.size+value.speedX>0&&value.y-value.size+value.speedY>0){value.x+=value.speedX;value.y+=value.speedY}}if(value.x+value.size+value.speedX>=canvas.width){value.speedX=-value.speedX}if(value.y+value.size+value.speedY>=canvas.height){value.speedY=-value.speedY}if(value.x-value.size+value.speedX<=0){value.speedX=-value.speedX}if(value.y-value.size+value.speedY<=0){value.speedY=-value.speedY}});reDraw();renderSpot()},0)}function reDraw(){ctx.clearRect(0,0,canvas.width,canvas.height)}function letGo(){createCas();getSpot(Number);renderSpot();run()}function nature(){var width=parseInt(window.getComputedStyle(cxo).width);var height=parseInt(window.getComputedStyle(cxo).height);if(!width||!height){window.removeEventListener("resize",nature);clearInterval(time);return}cxo.removeChild(canvas);createCas();canvas.width=width;canvas.height=height}window.addEventListener("resize",nature);letGo()}})();
